version: '3'

services:
  sifnode1:
    image: sifchain/sifnoded:${CHAINNET}
    network_mode: host
    environment:
      CHAINNET: ${CHAINNET}
      ETHEREUM_CONTRACT_ADDRESS: ${ETHEREUM_CONTRACT_ADDRESS}
      ETHEREUM_WEBSOCKET_ADDRESS: ${ETHEREUM_WEBSOCKET_ADDRESS}
      MONIKER: ${MONIKER1}
      PASSWORD: ${PASSWORD1}
      ETHEREUM_PRIVATE_KEY: ${ETHEREUM_PRIVATE_KEY1}
    volumes:
      - ../networks/validators/${CHAINNET}/${MONIKER1}:/root:Z
      - ../scripts:/scripts
    entrypoint: /scripts/entrypoint.sh

  sifnode2:
    image: sifchain/sifnoded:${CHAINNET}
    network_mode: host
    environment:
      CHAINNET: ${CHAINNET}
      ETHEREUM_CONTRACT_ADDRESS: ${ETHEREUM_CONTRACT_ADDRESS}
      ETHEREUM_WEBSOCKET_ADDRESS: ${ETHEREUM_WEBSOCKET_ADDRESS}
      MONIKER: ${MONIKER2}
      PASSWORD: ${PASSWORD2}
      ETHEREUM_PRIVATE_KEY: ${ETHEREUM_PRIVATE_KEY2}
    volumes:
      - ../networks/validators/${CHAINNET}/${MONIKER2}:/root:Z
      - ../scripts:/scripts
    entrypoint: /scripts/entrypoint.sh

  sifnode3:
    image: sifchain/sifnoded:${CHAINNET}
    network_mode: host
    environment:
      CHAINNET: ${CHAINNET}
      ETHEREUM_CONTRACT_ADDRESS: ${ETHEREUM_CONTRACT_ADDRESS}
      ETHEREUM_WEBSOCKET_ADDRESS: ${ETHEREUM_WEBSOCKET_ADDRESS}
      MONIKER: ${MONIKER3}
      PASSWORD: ${PASSWORD3}
      ETHEREUM_PRIVATE_KEY: ${ETHEREUM_PRIVATE_KEY3}
    volumes:
      - ../networks/validators/${CHAINNET}/${MONIKER3}:/root:Z
      - ../scripts:/scripts
    entrypoint: /scripts/entrypoint.sh

  sifnode4:
    image: sifchain/sifnoded:${CHAINNET}
    network_mode: host
    environment:
      CHAINNET: ${CHAINNET}
      ETHEREUM_CONTRACT_ADDRESS: ${ETHEREUM_CONTRACT_ADDRESS}
      ETHEREUM_WEBSOCKET_ADDRESS: ${ETHEREUM_WEBSOCKET_ADDRESS}
      MONIKER: ${MONIKER4}
      PASSWORD: ${PASSWORD4}
      ETHEREUM_PRIVATE_KEY: ${ETHEREUM_PRIVATE_KEY4}
    volumes:
      - ../networks/validators/${CHAINNET}/${MONIKER4}:/root:Z
      - ../scripts:/scripts
    entrypoint: /scripts/entrypoint.sh

networks:
  sifchain:
    driver: bridge
    ipam:
      driver: default
      config:
        -
          subnet: ${IPV4_SUBNET}
